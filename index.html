<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="ConfigMapper : Simple .NET config to object mapping">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>ConfigMapper</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/martinburrows/ConfigMapper">View on GitHub</a>

          <h1 id="project_title">ConfigMapper</h1>
          <h2 id="project_tagline">Simple .NET config to object mapping</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/martinburrows/ConfigMapper/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/martinburrows/ConfigMapper/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="turn-this" class="anchor" href="#turn-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>Turn this...</h2>

<p><code>var mySetting = ConfigurationManager.AppSettings["MySetting"];</code></p>

<h2>
<a id="into-this" class="anchor" href="#into-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>...into this:</h2>

<p><code>var mySetting = Configuration.AppSettings.MySetting;</code></p>

<ul>
<li>No magic strings - avoid run-time errors from typos.</li>
<li>Refactor-friendly - renaming settings is simple.</li>
<li>Find usages easily.</li>
<li>Supports mapping from appSettings, connectionStrings and environment variables.</li>
<li>Provides interfaced configuration objects, allowing your <code>IConfiguration</code> to be injected anywhere n a unit-testable manner.</li>
</ul>

<h3>
<a id="install-from-nuget" class="anchor" href="#install-from-nuget" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from <a href="https://www.nuget.org/packages/ConfigMapper">NuGet</a>
</h3>

<pre><code>PM&gt; Install-Package ConfigMapper
</code></pre>

<h4>
<a id="usage-is-simple" class="anchor" href="#usage-is-simple" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage is simple.</h4>

<pre><code>using ConfigMapping;
</code></pre>

<pre><code>public interface IAppSettings
{
    string KeyInAppSettings { get; }
    decimal WorksWithManyTypes { get; }
    MyEnum AlsoWorksWithEnums { get; }
}
</code></pre>

<pre><code>IAppSettings configuration = ConfigMapper.Map&lt;IAppSettings&gt;();
</code></pre>

<p>Configure your DI to inject <code>IAppSettings</code> using the Map method into any class. The code above assumes we defined <code>MyEnum</code> somewhere and we have our config file as:</p>

<pre><code>&lt;appSettings&gt;
  &lt;add key="KeyInAppSettings" value="Foo"/&gt;
  &lt;add key="WorksWithManyTypes" value="42.0"/&gt;
  &lt;add key="AlsoWorksWithEnums" value="Bar"/&gt;
&lt;/appSettings&gt;
</code></pre>

<p>Any Type the <code>System.Convert</code> class can handle is accepted, in addition to enums.</p>

<h4>
<a id="prefer-to-use-without-injection-thats-fine-too" class="anchor" href="#prefer-to-use-without-injection-thats-fine-too" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prefer to use without injection? That's fine too.</h4>

<p>Place this class in your project root for ease of access and call it from anywhere:</p>

<pre><code>public static class Configuration
{
  public static IAppSettings AppSettings = ConfigMapper.Map&lt;IAppSettings&gt;();
}
</code></pre>

<pre><code>var myConfigValue = Configuration.AppSettings.MyConfigKey;
</code></pre>

<h4>
<a id="connection-strings-are-also-handled" class="anchor" href="#connection-strings-are-also-handled" aria-hidden="true"><span class="octicon octicon-link"></span></a>Connection strings are also handled</h4>

<pre><code>public interface IConnectionStrings
{
    string JustTheConnectionStringItself { get; }
    ConnectionStringSettings AllConnectionStringProperties { get; }
}
</code></pre>

<pre><code>var cs = ConfigMapper.Map&lt;IConnectionStrings&gt;(MapFrom.ConnectionStrings);
</code></pre>

<p>Simply match your property names to your connection string names. Use <code>string</code> property types for simple mappings or <code>ConnectionStringSettings</code> property types to access the <code>ProviderName</code> and other properties.</p>

<h4>
<a id="map-from-environment-variables" class="anchor" href="#map-from-environment-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map from environment variables</h4>

<p>Environment variables are mapped at the process level - any user or system environment variables will also be accessible. Include only the variables you need to map in your interface, the rest are ignored.</p>

<pre><code>ConfigMapper.Map&lt;IMyEnvironmentVariables&gt;(MapFrom.EnvironmentVariables);
</code></pre>

<h4>
<a id="map-from-custom-keys" class="anchor" href="#map-from-custom-keys" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map from custom keys</h4>

<p>ConfigMapper will look for a key name matching each property name. To override this, use the <code>MapFrom</code> attribute</p>

<pre><code>    [MapFrom("ActualKey")]
    string AnythingYouLike { get; }
</code></pre>

<h4>
<a id="mark-optional-properties" class="anchor" href="#mark-optional-properties" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mark optional properties</h4>

<p>To be explicit ConfigMapper throws exceptions if it comes across missing keys in your config. You can mark properties as optional if this is actually intentional. To use anything other than the default value for each type you can specify this too, it will be converted from a string to your type like other configuration values.</p>

<pre><code>    [Optional]
    string ThisWillBeNull { get; }

    [Optional("true")]
    bool ThisDefaultsToTrue { get; }

</code></pre>

<h4>
<a id="efficiency" class="anchor" href="#efficiency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Efficiency</h4>

<p>ConfigMapper is thread-safe, and only one concrete instance from an interface is ever generated, meaning you can call the <code>Map&lt;T&gt;</code> method any number of times in your code without increased memory usage.</p>

<h4>
<a id="config-change-handling" class="anchor" href="#config-change-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Config Change Handling</h4>

<p>Call <code>ConfigMapper.RefreshConfiguration</code> if your configuration has changed. Any previously mapped objects will be updated with the latest values from your configuration without needing to re-map them. This works with <code>appSettings</code> and <code>connectionStrings</code> but not with environment variables.</p>

<h4>
<a id="licence" class="anchor" href="#licence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Licence</h4>

<p>Provided under the <a href="https://raw.githubusercontent.com/martinjrb/ConfigMapper/master/LICENSE">MIT Licence</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">ConfigMapper maintained by <a href="https://github.com/martinburrows">martinburrows</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-54893147-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
